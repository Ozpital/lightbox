(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OzBox=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _resizeObserverPolyfill=require("resize-observer-polyfill");var _resizeObserverPolyfill2=_interopRequireDefault(_resizeObserverPolyfill);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Template='<div class="ozbox" data-active="false">\r\n    <div class="ozbox__background"></div>\r\n\r\n    <div class="ozbox__nav">\r\n        <div class="ozbox__buttons">\r\n            <div class="ozbox__button ozbox__button--previous">\r\n                <button class="ozbox-button ozbox-button--previous">\r\n                    <span class="ozbox-button__icon"></span>\r\n                    <span class="ozbox-button__text">Previous</span>\r\n                </button>\r\n            </div>\r\n            <div class="ozbox__button ozbox__button--next">\r\n                <button class="ozbox-button ozbox-button--next">\r\n                    <span class="ozbox-button__icon"></span>\r\n                    <span class="ozbox-button__text">Next</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="ozbox__container">\r\n        <div class="ozbox__window">\r\n            <div class="ozbox__frame">\r\n                <div class="ozbox__loader"></div>\r\n                <div class="ozbox__button ozbox__button--close">\r\n                    <button class="ozbox-button ozbox-button--close">\r\n                        <span class="ozbox-button__icon"></span>\r\n                        <span class="ozbox-button__text">Close</span>\r\n                    </button>\r\n                </div>\r\n                <div class="ozbox__image">\r\n                    <img class="ozbox__img">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n';var OzBox=exports.OzBox=function(){function OzBox(options){_classCallCheck(this,OzBox);this.settings=Object.assign({selector:"[data-ozbox]",groupNameAttribute:"data-ozbox",customImgSrcAttribute:"data-ozbox-src"},options);this.appendTemplate();this.registerElements();this.registerTemplateBinds();this.populateDirectiveElements();this.registerDirectiveBinds();this.registerDomObserver()}_createClass(OzBox,[{key:"appendTemplate",value:function appendTemplate(){document.body.insertAdjacentHTML("beforeend",Template)}},{key:"registerElements",value:function registerElements(){this.elements={};this.elements.surface=document.querySelector(".ozbox");this.elements.window=document.querySelector(".ozbox__window");this.elements.loader=document.querySelector(".ozbox__loader");this.elements.image=document.querySelector(".ozbox__image");this.elements.img=document.querySelector(".ozbox__img");this.elements.buttons={};this.elements.buttons.close=document.querySelector(".ozbox-button--close");this.elements.buttons.previous=document.querySelector(".ozbox-button--previous");this.elements.buttons.next=document.querySelector(".ozbox-button--next")}},{key:"registerTemplateBinds",value:function registerTemplateBinds(){var _this=this;this.elements.buttons.close.addEventListener("click",function(){_this.hide();_this.hideImage();_this.hideClose();_this.removeImage()});this.elements.buttons.previous.addEventListener("click",function(){_this.changeImg("previous")});this.elements.buttons.next.addEventListener("click",function(){_this.changeImg("next")});this.elements.img.addEventListener("load",function(){_this.hideLoader();_this.showImage();_this.showClose()});new _resizeObserverPolyfill2.default(function(entries,observer){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=entries[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var entry=_step.value;_this.setMaxDimensions(entry.contentRect.width,entry.contentRect.height)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}).observe(this.elements.window)}},{key:"registerDomObserver",value:function registerDomObserver(){var _this2=this;var domObserver=new MutationObserver(function(){_this2.populateDirectiveElements();_this2.registerDirectiveBinds()});domObserver.observe(document,{attributes:true,childList:true,characterData:false,subtree:true})}},{key:"populateDirectiveElements",value:function populateDirectiveElements(){this.directiveElements=document.querySelectorAll(this.settings.selector)}},{key:"registerDirectiveBinds",value:function registerDirectiveBinds(){var _this3=this;for(var i=0;i<this.directiveElements.length;i++){if(this.directiveElements[i].eventsRegistered){continue}this.directiveElements[i].addEventListener("click",function(event){event.preventDefault();_this3.populateGroupImages(event.currentTarget);_this3.show();_this3.showLoader();_this3.loadImage()});this.directiveElements[i].eventsRegistered=true}}},{key:"populateGroupImages",value:function populateGroupImages(element){var groupName=false;if(element.getAttribute(this.settings.groupNameAttribute)){groupName=element.getAttribute(this.settings.groupNameAttribute)}var groupElement=element;var groupElements=[groupElement];if(groupName){var groupNodes=document.querySelectorAll("["+this.settings.groupNameAttribute+'="'+groupName+'"]');groupElements=[].slice.call(groupNodes)}this.groupImages=[];for(var i=0;i<groupElements.length;i++){var src=groupElements[i].getAttribute("href");if(groupElements[i].getAttribute(this.settings.customImgSrcAttribute)){src=groupElements[i].getAttribute(this.settings.customImgSrcAttribute)}this.groupImages.push(src)}this.groupCurrentIndex=0;for(var _i=0;_i<groupElements.length;_i++){if(groupElements[_i]===groupElement){this.groupCurrentIndex=_i;break}}this.elements.surface.setAttribute("data-group-size",groupElements.length)}},{key:"changeImg",value:function changeImg(direction){if(direction==="previous"){var newIndex=this.groupCurrentIndex-1;if(this.groupCurrentIndex===0){newIndex=this.groupImages.length-1}this.groupCurrentIndex=newIndex}if(direction==="next"){var _newIndex=this.groupCurrentIndex+1;if(this.groupCurrentIndex===this.groupImages.length-1){_newIndex=0}this.groupCurrentIndex=_newIndex}this.hideClose();this.hideImage();this.removeImage();this.showLoader();this.loadImage()}},{key:"setMaxDimensions",value:function setMaxDimensions(width,height){this.elements.img.style.maxWidth=width+"px";this.elements.img.style.maxHeight=height+"px"}},{key:"show",value:function show(){this.elements.surface.setAttribute("data-active",true)}},{key:"hide",value:function hide(){this.elements.surface.setAttribute("data-active",false)}},{key:"showLoader",value:function showLoader(){this.elements.loader.setAttribute("data-active",true)}},{key:"hideLoader",value:function hideLoader(){this.elements.loader.setAttribute("data-active",false)}},{key:"removeImage",value:function removeImage(){this.elements.img.setAttribute("src","")}},{key:"loadImage",value:function loadImage(){this.elements.img.setAttribute("src",this.groupImages[this.groupCurrentIndex])}},{key:"showImage",value:function showImage(){this.elements.image.setAttribute("data-active",true)}},{key:"hideImage",value:function hideImage(){this.elements.image.setAttribute("data-active",false)}},{key:"showClose",value:function showClose(){this.elements.buttons.close.setAttribute("data-active",true)}},{key:"hideClose",value:function hideClose(){this.elements.buttons.close.setAttribute("data-active",false)}}]);return OzBox}()},{"resize-observer-polyfill":3}],2:[function(require,module,exports){"use strict";var _module=require("./module");new _module.OzBox},{"./module":1}],3:[function(require,module,exports){(function(global){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.ResizeObserver=factory()})(this,function(){"use strict";var MapShim=function(){if(typeof Map!=="undefined"){return Map}function getIndex(arr,key){var result=-1;arr.some(function(entry,index){if(entry[0]===key){result=index;return true}return false});return result}return function(){function anonymous(){this.__entries__=[]}var prototypeAccessors={size:{configurable:true}};prototypeAccessors.size.get=function(){return this.__entries__.length};anonymous.prototype.get=function(key){var index=getIndex(this.__entries__,key);var entry=this.__entries__[index];return entry&&entry[1]};anonymous.prototype.set=function(key,value){var index=getIndex(this.__entries__,key);if(~index){this.__entries__[index][1]=value}else{this.__entries__.push([key,value])}};anonymous.prototype.delete=function(key){var entries=this.__entries__;var index=getIndex(entries,key);if(~index){entries.splice(index,1)}};anonymous.prototype.has=function(key){return!!~getIndex(this.__entries__,key)};anonymous.prototype.clear=function(){this.__entries__.splice(0)};anonymous.prototype.forEach=function(callback,ctx){var this$1=this;if(ctx===void 0)ctx=null;for(var i=0,list=this$1.__entries__;i<list.length;i+=1){var entry=list[i];callback.call(ctx,entry[1],entry[0])}};Object.defineProperties(anonymous.prototype,prototypeAccessors);return anonymous}()}();var isBrowser=typeof window!=="undefined"&&typeof document!=="undefined"&&window.document===document;var global$1=function(){if(typeof global!=="undefined"&&global.Math===Math){return global}if(typeof self!=="undefined"&&self.Math===Math){return self}if(typeof window!=="undefined"&&window.Math===Math){return window}return Function("return this")()}();var requestAnimationFrame$1=function(){if(typeof requestAnimationFrame==="function"){return requestAnimationFrame.bind(global$1)}return function(callback){return setTimeout(function(){return callback(Date.now())},1e3/60)}}();var trailingTimeout=2;var throttle=function(callback,delay){var leadingCall=false,trailingCall=false,lastCallTime=0;function resolvePending(){if(leadingCall){leadingCall=false;callback()}if(trailingCall){proxy()}}function timeoutCallback(){requestAnimationFrame$1(resolvePending)}function proxy(){var timeStamp=Date.now();if(leadingCall){if(timeStamp-lastCallTime<trailingTimeout){return}trailingCall=true}else{leadingCall=true;trailingCall=false;setTimeout(timeoutCallback,delay)}lastCallTime=timeStamp}return proxy};var REFRESH_DELAY=20;var transitionKeys=["top","right","bottom","left","width","height","size","weight"];var mutationObserverSupported=typeof MutationObserver!=="undefined";var ResizeObserverController=function(){this.connected_=false;this.mutationEventsAdded_=false;this.mutationsObserver_=null;this.observers_=[];this.onTransitionEnd_=this.onTransitionEnd_.bind(this);this.refresh=throttle(this.refresh.bind(this),REFRESH_DELAY)};ResizeObserverController.prototype.addObserver=function(observer){if(!~this.observers_.indexOf(observer)){this.observers_.push(observer)}if(!this.connected_){this.connect_()}};ResizeObserverController.prototype.removeObserver=function(observer){var observers=this.observers_;var index=observers.indexOf(observer);if(~index){observers.splice(index,1)}if(!observers.length&&this.connected_){this.disconnect_()}};ResizeObserverController.prototype.refresh=function(){var changesDetected=this.updateObservers_();if(changesDetected){this.refresh()}};ResizeObserverController.prototype.updateObservers_=function(){var activeObservers=this.observers_.filter(function(observer){return observer.gatherActive(),observer.hasActive()});activeObservers.forEach(function(observer){return observer.broadcastActive()});return activeObservers.length>0};ResizeObserverController.prototype.connect_=function(){if(!isBrowser||this.connected_){return}document.addEventListener("transitionend",this.onTransitionEnd_);window.addEventListener("resize",this.refresh);if(mutationObserverSupported){this.mutationsObserver_=new MutationObserver(this.refresh);this.mutationsObserver_.observe(document,{attributes:true,childList:true,characterData:true,subtree:true})}else{document.addEventListener("DOMSubtreeModified",this.refresh);this.mutationEventsAdded_=true}this.connected_=true};ResizeObserverController.prototype.disconnect_=function(){if(!isBrowser||!this.connected_){return}document.removeEventListener("transitionend",this.onTransitionEnd_);window.removeEventListener("resize",this.refresh);if(this.mutationsObserver_){this.mutationsObserver_.disconnect()}if(this.mutationEventsAdded_){document.removeEventListener("DOMSubtreeModified",this.refresh)}this.mutationsObserver_=null;this.mutationEventsAdded_=false;this.connected_=false};ResizeObserverController.prototype.onTransitionEnd_=function(ref){var propertyName=ref.propertyName;if(propertyName===void 0)propertyName="";var isReflowProperty=transitionKeys.some(function(key){return!!~propertyName.indexOf(key)});if(isReflowProperty){this.refresh()}};ResizeObserverController.getInstance=function(){if(!this.instance_){this.instance_=new ResizeObserverController}return this.instance_};ResizeObserverController.instance_=null;var defineConfigurable=function(target,props){for(var i=0,list=Object.keys(props);i<list.length;i+=1){var key=list[i];Object.defineProperty(target,key,{value:props[key],enumerable:false,writable:false,configurable:true})}return target};var getWindowOf=function(target){var ownerGlobal=target&&target.ownerDocument&&target.ownerDocument.defaultView;return ownerGlobal||global$1};var emptyRect=createRectInit(0,0,0,0);function toFloat(value){return parseFloat(value)||0}function getBordersSize(styles){var positions=[],len=arguments.length-1;while(len-- >0)positions[len]=arguments[len+1];return positions.reduce(function(size,position){var value=styles["border-"+position+"-width"];return size+toFloat(value)},0)}function getPaddings(styles){var positions=["top","right","bottom","left"];var paddings={};for(var i=0,list=positions;i<list.length;i+=1){var position=list[i];var value=styles["padding-"+position];paddings[position]=toFloat(value)}return paddings}function getSVGContentRect(target){var bbox=target.getBBox();return createRectInit(0,0,bbox.width,bbox.height)}function getHTMLElementContentRect(target){var clientWidth=target.clientWidth;var clientHeight=target.clientHeight;if(!clientWidth&&!clientHeight){return emptyRect}var styles=getWindowOf(target).getComputedStyle(target);var paddings=getPaddings(styles);var horizPad=paddings.left+paddings.right;var vertPad=paddings.top+paddings.bottom;var width=toFloat(styles.width),height=toFloat(styles.height);if(styles.boxSizing==="border-box"){if(Math.round(width+horizPad)!==clientWidth){width-=getBordersSize(styles,"left","right")+horizPad}if(Math.round(height+vertPad)!==clientHeight){height-=getBordersSize(styles,"top","bottom")+vertPad}}if(!isDocumentElement(target)){var vertScrollbar=Math.round(width+horizPad)-clientWidth;var horizScrollbar=Math.round(height+vertPad)-clientHeight;if(Math.abs(vertScrollbar)!==1){width-=vertScrollbar}if(Math.abs(horizScrollbar)!==1){height-=horizScrollbar}}return createRectInit(paddings.left,paddings.top,width,height)}var isSVGGraphicsElement=function(){if(typeof SVGGraphicsElement!=="undefined"){return function(target){return target instanceof getWindowOf(target).SVGGraphicsElement}}return function(target){return target instanceof getWindowOf(target).SVGElement&&typeof target.getBBox==="function"}}();function isDocumentElement(target){return target===getWindowOf(target).document.documentElement}function getContentRect(target){if(!isBrowser){return emptyRect}if(isSVGGraphicsElement(target)){return getSVGContentRect(target)}return getHTMLElementContentRect(target)}function createReadOnlyRect(ref){var x=ref.x;var y=ref.y;var width=ref.width;var height=ref.height;var Constr=typeof DOMRectReadOnly!=="undefined"?DOMRectReadOnly:Object;var rect=Object.create(Constr.prototype);defineConfigurable(rect,{x:x,y:y,width:width,height:height,top:y,right:x+width,bottom:height+y,left:x});return rect}function createRectInit(x,y,width,height){return{x:x,y:y,width:width,height:height}}var ResizeObservation=function(target){this.broadcastWidth=0;this.broadcastHeight=0;this.contentRect_=createRectInit(0,0,0,0);this.target=target};ResizeObservation.prototype.isActive=function(){var rect=getContentRect(this.target);this.contentRect_=rect;return rect.width!==this.broadcastWidth||rect.height!==this.broadcastHeight};ResizeObservation.prototype.broadcastRect=function(){var rect=this.contentRect_;this.broadcastWidth=rect.width;this.broadcastHeight=rect.height;return rect};var ResizeObserverEntry=function(target,rectInit){var contentRect=createReadOnlyRect(rectInit);defineConfigurable(this,{target:target,contentRect:contentRect})};var ResizeObserverSPI=function(callback,controller,callbackCtx){this.activeObservations_=[];this.observations_=new MapShim;if(typeof callback!=="function"){throw new TypeError("The callback provided as parameter 1 is not a function.")}this.callback_=callback;this.controller_=controller;this.callbackCtx_=callbackCtx};ResizeObserverSPI.prototype.observe=function(target){if(!arguments.length){throw new TypeError("1 argument required, but only 0 present.")}if(typeof Element==="undefined"||!(Element instanceof Object)){return}if(!(target instanceof getWindowOf(target).Element)){throw new TypeError('parameter 1 is not of type "Element".')}var observations=this.observations_;if(observations.has(target)){return}observations.set(target,new ResizeObservation(target));this.controller_.addObserver(this);this.controller_.refresh()};ResizeObserverSPI.prototype.unobserve=function(target){if(!arguments.length){throw new TypeError("1 argument required, but only 0 present.")}if(typeof Element==="undefined"||!(Element instanceof Object)){return}if(!(target instanceof getWindowOf(target).Element)){throw new TypeError('parameter 1 is not of type "Element".')}var observations=this.observations_;if(!observations.has(target)){return}observations.delete(target);if(!observations.size){this.controller_.removeObserver(this)}};ResizeObserverSPI.prototype.disconnect=function(){this.clearActive();this.observations_.clear();this.controller_.removeObserver(this)};ResizeObserverSPI.prototype.gatherActive=function(){var this$1=this;this.clearActive();this.observations_.forEach(function(observation){if(observation.isActive()){this$1.activeObservations_.push(observation)}})};ResizeObserverSPI.prototype.broadcastActive=function(){if(!this.hasActive()){return}var ctx=this.callbackCtx_;var entries=this.activeObservations_.map(function(observation){return new ResizeObserverEntry(observation.target,observation.broadcastRect())});this.callback_.call(ctx,entries,ctx);this.clearActive()};ResizeObserverSPI.prototype.clearActive=function(){this.activeObservations_.splice(0)};ResizeObserverSPI.prototype.hasActive=function(){return this.activeObservations_.length>0};var observers=typeof WeakMap!=="undefined"?new WeakMap:new MapShim;var ResizeObserver=function(callback){if(!(this instanceof ResizeObserver)){throw new TypeError("Cannot call a class as a function.")}if(!arguments.length){throw new TypeError("1 argument required, but only 0 present.")}var controller=ResizeObserverController.getInstance();var observer=new ResizeObserverSPI(callback,controller,this);observers.set(this,observer)};["observe","unobserve","disconnect"].forEach(function(method){ResizeObserver.prototype[method]=function(){return(ref=observers.get(this))[method].apply(ref,arguments);var ref}});var index=function(){if(typeof global$1.ResizeObserver!=="undefined"){return global$1.ResizeObserver}return ResizeObserver}();return index})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}]},{},[2]);
